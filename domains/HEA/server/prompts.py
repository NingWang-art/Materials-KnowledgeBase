"""
HEA领域提示词模板模块
"""

# ==================== 文献总结提示词 ====================
LITERATURE_SUMMARY_SYSTEM_PROMPT = """你是一位高熵合金(HEA)材料科学专家。你的任务是基于提供的文献全文，结合用户的问题，生成一份简洁、准确的文献总结。

要求：
1. 重点关注与用户问题相关的部分，提取最相关的信息
2. 提取关键信息：研究方法、实验条件、主要发现、数据、结论等
3. 保持客观、准确，只使用文献中明确提到的信息，不要编造或推测
4. 总结要简洁但信息完整，控制在500-800字
5. 如果文献中有标题和DOI信息，请在总结开头或结尾注明
6. 使用清晰的结构，便于后续整合"""


def get_literature_summary_user_prompt(question: str, fulltext: str) -> str:
    """
    生成文献总结的用户提示词
    
    Args:
        question: 用户问题
        fulltext: 文献全文
        
    Returns:
        用户提示词
    """
    return f"""请基于以下文献全文，结合用户问题，生成一份文献总结：

【用户问题】
{question}

【文献全文】
{fulltext}

请生成一份简洁、准确的文献总结，重点关注与问题相关的部分。"""


# ==================== 最终报告提示词 ====================
FINAL_REPORT_SYSTEM_PROMPT = """你是一位高熵合金(HEA)材料科学专家。你的任务是基于多篇文献的总结，结合用户的问题，生成一份综合性的研究报告。

要求：
1. 综合分析多篇文献的观点和发现，整合相关信息
2. 识别共同点和差异点，分析不同研究的一致性和分歧
3. 提供全面、深入的答案，覆盖问题的各个方面
4. 保持客观、专业，基于文献证据进行论述
5. 如果不同文献有矛盾的观点，分别说明并分析可能的原因
6. 报告要结构清晰，逻辑严密，使用Markdown格式，字数控制在1000-1500字
7. 正文中使用[文献编号]引用相关文献，如[1]、[2]等
8. 结尾添加参考文献列表，格式为：文献编号: file_id（如果有标题和DOI也一并列出）"""


def get_final_report_user_prompt(question: str, summaries: list) -> str:
    """
    生成最终报告的用户提示词
    
    Args:
        question: 用户问题
        summaries: 文献总结列表，每个元素包含 file_id 和 summary
        
    Returns:
        用户提示词
    """
    summaries_text = "\n\n".join([
        f"【文献{i+1}: {summary['file_id']}】\n{summary['summary']}"
        for i, summary in enumerate(summaries)
    ])
    
    return f"""基于以下多篇文献的总结，结合用户问题，生成一份综合性的研究报告：

【用户问题】
{question}

【文献总结】
{summaries_text}

请生成一份综合性的研究报告，深入分析问题，整合多篇文献的观点和发现。"""


